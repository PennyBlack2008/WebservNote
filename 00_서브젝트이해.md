# Webserv

"This is when you finally understand why a url starts with HTTP"

왜 url 이 HTTP 로 시작되는 지 넌 알게 될 것이다....
Summery: HTTP server 를 real HTTP RFC 를 따라서 만들 것.

미리 조언을 하자면, HTTP arcane 을 알면 나중에 좋다.

<span style="color:red">real HTTP RFC 가 도대체 뭐냐..</span>

## Chapter I : Introduction

 웹서버의 중요한 기능 중 하나는 Client 로 web page 를 저장, 전달, 프로세스하는 것. (프로세스 ? 무슨 프로세스 )

<span style="color:red">우리가 구현해야하는 게 client 로 webpage 를 저장, 전달, 프로세스 하는 것일 듯?</span>


 pages 는 HTML 서류로 전달됨. 이미지, style sheet, script, text 가
 들어 있음.

<span style="color:red">이게 HTML 를 배워야하는 이유인 듯? 이미지, style, sheet, script, text 가 제대로 들어가있도록 문법 공부해야한다.</span>


 웹서버가 효율적으로 돌 수 있도록 잘짜라

 user agent, web browser or web crawler 들은 HTTP 를 사용해서 특정 리소스를 요청해서 통신을 함. 그리고 서버는 해당 리소스의 콘텐츠로 응답하거나 오류 메시지로 응답함.

 <span style="color:red">이것도 처리해야할 부분</span>

리소스는 일반적으로 서버의 보조 저장소에서 있는 데, 이건 must 는 아니다. webserver 동작에 따라 허용될 수 있음.

중요한 기능은 webserver 로 content 를 받을 수 있냐, 그러면 HTTP 를 제대로 작성을 해서 client 에게 보내줘야겠지?

## Chapter II : Mandatory Part

처음 배우는 허용함수들

``strptime``, ``strftime``, ``usleep``, select, socket, accept, listen, send, recv, bind, connect, inet_addr, setsockopt, getsockname, fcntl

### 만들 때 호환되게 해야하는 스펙
- rfc 7230 ~ 7235 (http 1.1)
- 허용 헤더
	- Accept-Charsets
	- Accept-Language
	- Allow
	- Authorization
	- Content-Language
	- Content-Length
	- Content-Location
	- Content-Type
	- Date
	- Host
	- Last-Modified
	- Location
	- Referer
	- Retry-After
	- Server
	- Transfer-Encoding
	- User-Agent
	- WWW-Authenticate

- 차단되지 않아야하며 클라이언트와 서버 사이의 모든 IO에 대해 하나의 선택 만 사용해야합니다 (포함 사항 수신).<span style="color:red"> 뭔 소리야</span>

- 읽기 쓰기 동시해해라..<span style="color:red"> 뭔 소리야</span>
- 서버를 차단하지 않아야하며 필요한 경우 클라이언트가 제대로 바운스되어야합니다. <span style="color:red"> 바운스가 뭐임. 그리고 서버를 차단하지 않아야한다는 게 뭔소리인지.. 웹서버를 만드는 건데 자기자신을 차단하지 않아야된다는 건가? </span>

- 선택을 거치지 않고 읽기 작업이나 쓰기 작업을 수행해서는 안됩니다. <span style="color:red"> 뭔 소리야</span>

- read, write 후에 errno 을 체크하는 것은 금지된다.

- Server 에서 요청이 영원히 막히면 안된다.

- leak, crash 있으면 안된다.

- CGI 의외의 용도로는 포크 사용 금지

- iostream, string, vector, list, queue, stack, map, algorithm, exception, ctime, cstring 모두 사용 가능.

- argument 또는 default path 에 config file 이 있어야한다.

#### 추가되는 말들(무슨 말 인지..)
- "We’ve let you use fcntl because mac os X doesn’t implement write the
same way as other unix OS.
You must use non-blocking FD to have a result similar to other OS."
-> <span style="color:red">무슨 말인지..</span>

- "Because you are using non-blocking FD, you could use read/recv or
write/send functions without select and your server would be not
blocking."

- "Again trying to read/recv or write/send in any FD without going
through a select will give you a mark equal to 0 and the end of the
evaluation."

- "You can only use fcntl as follow:  fcntl(fd, F_SETFL, O_NONBLOCK);
Any other flags is forbidden"

- config file 요구사항
	- port 와 각 server 의 host를 선택해라
	- server_name 을 세팅가능해야한다.(default 도)
	-